---
title: 水族館マッチング アルゴリズム解説
---

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

# 水族館マッチングのアルゴリズム解説

## 解説スライド

![algorithm1](../images/algorithm1.PNG)  
![algorithm2](../images/algorithm2.PNG)  
![algorithm3](../images/algorithm3.PNG)  
![algorithm4](../images/algorithm4.PNG)  
![algorithm5](../images/algorithm5.PNG)  
![algorithm6](../images/algorithm6.PNG)  
![algorithm7](../images/algorithm7.PNG)  
![algorithm8](../images/algorithm8.PNG)  
![algorithm9](../images/algorithm9.PNG)  
![algorithm10](../images/algorithm10.PNG)  
![algorithm11](../images/algorithm11.PNG)  
![algorithm12](../images/algorithm12.PNG)  
![algorithm13](../images/algorithm13.PNG)  
![algorithm14](../images/algorithm14.PNG)  
![algorithm15](../images/algorithm15.PNG)  
![algorithm16](../images/algorithm16.PNG)  
![algorithm17](../images/algorithm17.PNG)  
![algorithm18](../images/algorithm18.PNG)  

## 解説動画

[水族館マッチングアルゴリズム解説 (YouTube)](https://youtu.be/2X1YY6vnraM)  
上の解説スライドを用いた、合成音声による解説付きのアルゴリズム解説の動画です。  

## 水族館マッチングのアルゴリズム解説

### 1. 水族館マッチングの概要
水族館マッチングは、質問応答システムとして機能し、回答者の興味に合致する水族館を提案するプログラムである。本稿では、水族館マッチングに実装されたアルゴリズムの動作原理を、数式を用いて詳細に解説する。

アルゴリズムは、以下の主要なステップで構成される。
1. **水族館の展示評価の数値化**: 開発者が、各水族館の展示内容を充実度に基づいて数値評価する。これにより、水族館 $$i$$ の展示 $$j$$ の評価点 $$a_{ij}$$ が得られる。
2. **回答者の質問応答**: 回答者は、重視する展示と特に重視する展示を選択する。この回答は、アルゴリズムへの入力となる。
3. **一致度評価点の計算**: アルゴリズムは、回答者の回答と各水族館の展示評価を基に、水族館 $$i$$ と回答者の興味との一致度評価点 $$A_i$$ を計算する。
4. **水族館のランキング表示**: 一致度評価点 $$A_i$$ の大きい順に水族館をソートし、上位の水族館を回答者に提示する。

本アルゴリズムは、水族館の展示評価と回答者の興味を照合することで、最適な水族館マッチングを実現する。

### 2. 数値による展示の評価
水族館の各展示は、数値によって評価される。この数値評価は、回答者の興味と水族館の展示内容の一致度を計算するために用いられる。

例えば、名古屋港水族館の展示評価は、スプレッドシート上で数値として入力される。拡大画像に示すように、イルカの水中観察は5点、イルカショーは5点、シャチは5点と評価されている。これらの評価点は、展示の充実度を示す指標であり、数値が大きいほど展示が充実していることを意味する。

質問の選択肢は、評価対象となる展示と一致している。これにより、回答者が重視する展示が、各水族館でどの程度充実しているかを定量的に評価することが可能となる。

### 3. 一致度合いの計算方法
一致度合いの計算方法を、具体例を用いて説明する。ここでは、展示をイルカ、シャチ、ベルーガの3種類に限定して議論を進める。

#### 3.1. ベクトルの定義
一致度合いの計算には、以下の2つのベクトルを用いる。

* **回答者の重要度ベクトル** $$\mathbf{r}$$: 回答者が各展示をどの程度重視するかを示すベクトル。$$j$$ 番目の要素 $$r_j$$ は、展示 $$j$$ の重要度を表す。重視する展示には1、特に重視する展示には1.5、重視しない展示には0を格納する。

  例として、回答者がイルカを重視、シャチを特に重視した場合、重要度ベクトル $$\mathbf{r}$$ は以下のように表される。

$$
\mathbf{r} = \begin{bmatrix} r_1 \ r_2 \ r_3 \end{bmatrix} = \begin{bmatrix} 1 \ 1.5 \ 0 \end{bmatrix}
$$


ここで、$$r_1$$ はイルカ、$$r_2$$ はシャチ、$$r_3$$ はベルーガの重要度をそれぞれ表す。

* **水族館の評価ベクトル** $$\mathbf{a_i}$$: 水族館 $$i$$ の各展示の評価点を格納するベクトル。$$j$$ 番目の要素 $$a_{ij}$$ は、水族館 $$i$$ の展示 $$j$$ の評価点を表す。評価点は、スプレッドシートに入力された数値がそのまま用いられる。

例として、水族館 $$i$$ の評価ベクトル $$\mathbf{a_i}$$ が以下のように与えられたとする。

$$
\mathbf{a_i} = \begin{bmatrix} a_{i1} \ a_{i2} \ a_{i3} \end{bmatrix} = \begin{bmatrix} 2 \ 5 \ 3 \end{bmatrix}
$$


ここで、$$a_{i1}$$ はイルカ、$$a_{i2}$$ はシャチ、$$a_{i3}$$ はベルーガの評価点をそれぞれ表す。

#### 3.2. 一致度評価点の算出
水族館 $$i$$ と回答者の興味との一致度評価点 $$A_i$$ は、ベクトル $$\mathbf{r}$$ とベクトル $$\mathbf{a_i}$$ の内積によって計算される。

$$
A_i = \mathbf{r} \cdot \mathbf{a_i} = \sum_{j=1}^{3} r_j a_{ij}
$$


具体例として、上記のベクトル $$\mathbf{r}$$ と $$\mathbf{a_i}$$ を用いると、一致度評価点 $$A_i$$ は以下のように計算される。

$$
A_i = (1 \times 2) + (1.5 \times 5) + (0 \times 3) = 2 + 7.5 + 0 = 9.5
$$


一致度評価点 $$A_i$$ は、回答者の重要度を反映した展示の充実度を総合的に評価する指標となる。$$A_i$$ が大きいほど、水族館 $$i$$ の展示内容が回答者の興味と一致している度合いが高いと判断できる。

#### 3.3. 水族館のランキング
全て水族館に関して、一致度評価点 $$A_i$$ を算出した後、評価点の降順に水族館をソートする。上位5つの水族館を回答者に提示することで、回答者は自身に最適な水族館を効率的に見つけることができる。

### 4. まとめと今後の展望
本稿では、水族館マッチングアルゴリズムの詳細な動作原理を解説した。アルゴリズムは、各水族館の展示評価と回答者の回答に基づき、内積計算によって一致度評価点を算出し、水族館をランキングする。このアルゴリズムは、加重平均の考え方を応用したものである。

今後の展望として、以下の点が挙げられる。
* **対応水族館の増加**: より多くの水族館をデータベースに追加し、マッチングの対象範囲を拡大する。
* **洗練されたUIの作成**: ユーザーインターフェースを改善し、回答者の利便性を向上させる。
* **水族館の説明の追加**: 各水族館の詳細情報を提供し、回答者の水族館選択をサポートする。
* **地域別マッチング**: 回答者の地域に基づいて、地域別のマッチング結果を表示する機能を追加する。

これらの機能拡張は、順次実装していく予定である。

今後も水族館マッチングをご期待ください
